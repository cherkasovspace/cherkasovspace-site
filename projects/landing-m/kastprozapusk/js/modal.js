
(function(b){b.fn.wgModal=function(d){var h={triggerElement:"",openDelay:null,openScrolled:null,openAfterNClicks:null,width:null,verticalCentering:false,topOffset:null,bottomOffset:null,keyboard:true,innerScroll:false,remote:null,theme:"",responsive:{},onInitialize:function(j){},onBeforeClose:function(j){},onAfterClose:function(j){},onBeforeOpen:function(j){},onAfterOpen:function(j){},};var f=b.extend({},h,d);var e=this;e.initialize=function(){e.addClass("wg-modal");e.wrapInner('<div class="wg-content"></div>');e.prepend(b('<div class="wg-modal-close">&times;</div>'))};e.closeModal=function(){f.onBeforeClose.call(e,e);e.parent(".bg-wg-modal").addClass("closing");setTimeout(function(){if(e.parent().hasClass("bg-wg-modal")){e.unwrap(".bg-wg-modal");e.parent(".bg-wg-modal").removeClass("closing")}},400);b(e).css("padding-top","");f.onAfterClose.call(e,e)};e.openModal=function(){if(e.parent().hasClass("bg-wg-modal")===false){f.onBeforeOpen.call(e,e);e.wrap('<div class="bg-wg-modal"></div>');if(b(e).children(".wg-content").children(".wg-header").length>0){var j=b(e).children(".wg-content").children(".wg-header").outerHeight();console.log(j);b(e).css({"padding-top":parseFloat(j)+parseFloat(b(e).css("padding-top"))})}f.onAfterOpen.call(e,e)}};return this.each(function(){var j=b(this);var k=this;f.onInitialize.call(k,e);e.initialize();i();g(k,true);b(window).on("resize",function(l){i();g(k,false)});b(k).on("click",".wg-modal-close",function(){e.closeModal()});b(document).on("click",".bg-wg-modal",function(){if(b(k).parent().hasClass("bg-wg-modal")){e.closeModal()}});b(k).click(function(l){l.stopPropagation()})});function i(){var l=f.responsive;if(Object.keys(l).length!==0){var k=b(window).width();var j=null;b.each(l,function(m,n){if(k>m){j=m}});if(j!==null){f=b.extend({},f,d);f=b.extend({},f,d.responsive[j])}else{f=b.extend({},f,d)}}}function g(q,p){b(window).on("load resize",function(x){if(f.verticalCentering){if(b(q).height()<a().height){b(q).addClass("verticalCentering")}else{b(q).removeClass("verticalCentering")}}});if(f.remote!==null){b(q).children(".wg-content").load(f.remote)}if(f.width!==null){b(q).css("width",f.width)}if(f.topOffset!==null){b(q).css("margin-top",f.topOffset)}if(f.bottomOffset!==null){b(q).css("margin-bottom",f.bottomOffset)}if(f.innerScroll===true){b(q).addClass("innerScroll");var k=null;var j=parseFloat(b(q).css("margin-top"));var v=parseFloat(b(q).css("margin-bottom"));var y=parseFloat(b(q).css("padding-top"));var t=parseFloat(b(q).css("padding-bottom"));var w=parseFloat(b(q).css("border-top-width"));var o=parseFloat(b(q).css("border-bottom-width"));k=j+v+y+t+w+o;var m="calc(100vh - "+k+"px)";b(q).children(".wg-content").css("max-height",m)}if(f.theme!==""){b(q).addClass(f.theme)}if(f.openAfterNClicks!==null){var s=12*12;var n=new Date();n.setMonth(n.getMonth()+s);var u=e.selector;var u=u.replace("#","id_");u=u.replace(".","class_");u=u.replace("-","_");var l="wgModalCounter"+u;var r=c(l);if(r<=f.openAfterNClicks){r++;document.cookie=l+"="+r+"; expires="+n+";path=/";if(r===f.openAfterNClicks){e.openModal()}}}if(f.openScrolled!==null){var s=12*12;var n=new Date();n.setMonth(n.getMonth()+s);var u=e.selector;var u=u.replace("#","id_");u=u.replace(".","class_");u=u.replace("-","_");var l="wgAlreadyOpened"+u;b(window).on("load resize scroll",function(z){var A=c(l);var x=b(this).scrollTop();if(x>=f.openScrolled&&A!=1){e.openModal();document.cookie=l+"=1; expires="+n+";path=/"}})}if(p){if(f.openDelay!==null){setTimeout(function(){e.openModal()},f.openDelay)}}if(f.triggerElement!==""){b(f.triggerElement).click(function(){e.openModal()})}if(f.keyboard===true){b(document).keyup(function(x){if(x.keyCode===27&&b(q).parent().hasClass("bg-wg-modal")){e.closeModal()}})}}};function c(e){var g=e+"=";var d=document.cookie.split(";");for(var f=0;f<d.length;f++){var h=d[f];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(g)==0){return h.substring(g.length,h.length)}}return null}function a(){var f=window,d="inner";if(!("innerWidth" in window)){d="client";f=document.documentElement||document.body}return{width:f[d+"Width"],height:f[d+"Height"]}}}(jQuery));